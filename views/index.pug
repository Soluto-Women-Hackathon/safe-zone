doctype html
html
    head
        title Custom Markers
        meta(name='viewport', content='width=device-width, initial-scale=1.0, user-scalable=no')
        meta(charset='utf-8')
        style.
            /* Always set the map height explicitly to define the size of the div
            * element that contains the map. */
            #map {
                height: 100%;
            }
            /* Optional: Makes the sample page fill the window. */
            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
    body
        #map
        script.
            var map;
            function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 16,
                    center: new google.maps.LatLng(32.06409,34.77403),
                    mapTypeId: 'roadmap'
                });
                var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
                var icons = {
                    safe: {
                        icon: 'safe.png'
                    },
                    ok: {
                        icon: 'warning.png'
                    },
                    unsafe: {
                        icon: 'danger.png'
                    }
                };
                var features = JSON.parse('!{features}')
                // Create markers.
                features.forEach(function(feature) {
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(feature.position[0], feature.position[1]),
                        icon: icons[feature.type].icon,
                        map: map
                    });
                });
                // Levinsky market
                var triangleCoords = [
                    new google.maps.LatLng(33.5362475, -111.9267386),
                    new google.maps.LatLng(33.5104882, -111.9627875),
                    new google.maps.LatLng(33.5004686, -111.9027061)
                ];
            }
        script(async='', defer='', src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAcXyGC_QH6mSQ_uzvJFM0t-6HOvBGj04c&callback=initMap')
